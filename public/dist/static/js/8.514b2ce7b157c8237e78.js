webpackJsonp([8],{"6/yE":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("woOf"),n=a.n(o),l=a("RY13"),i={name:"tag-manager",data:function(){return{tableLoading:!1,list:[],tableKey:0,total:0,listQuery:{pageNum:1,pageSize:10},addTagDialog:!1,form:{label:"",background:"#000",color:"#000"}}},methods:{hotTagUpdate:function(t){var e=this;console.log(t),Object(l.f)({_id:t._id,hot:!t.hot}).then(function(t){0===t.status&&(e.$message({message:"操作成功",type:"success"}),e.getDataList())})},handleDelete:function(t){var e=this;this.$confirm("确定要删除吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(l.b)({_id:t._id}).then(function(t){0===t.status&&(e.$message({message:"删除成功",type:"success"}),e.getDataList())})}).catch(function(){})},changTime:function(t,e){if(!t)return"暂无数据";var a=new Date(t),o=a.getFullYear(),n=a.getMonth()+1,l=a.getDate(),i=a.getHours(),r=a.getMinutes(),s=a.getSeconds();return e?o+"年"+n+"月"+l+"日":o+"年"+n+"月"+l+"日-"+(i<10?"0"+i:i)+":"+(r<10?"0"+r:r)+":"+(s<10?"0"+s:s)},changeColorToRgb:function(t){var e=[],a=[];if(3===(t=t.replace(/#/,"")).length){for(var o=[],n=0;n<3;n++)o.push(t.charAt(n)+t.charAt(n));t=o.join("")}for(var l=0;l<3;l++)e[l]="0x"+t.substr(2*l,2),a.push(parseInt(Number(e[l])));return"rgba("+a.join(",")+", .2)"},handleAdd:function(){this.handleResetAddTagForm(),this.addTagDialog=!0},handleResetAddTagForm:function(){this.form=n()(this.form,{label:"",background:"#000",color:"#000"})},handleUpdate:function(t){var e=this;Object(l.g)(t).then(function(t){0===t.status&&(e.$message({message:"修改成功",type:"success"}),e.getDataList())})},getDataList:function(){var t=this;return this.tableLoading=!0,Object(l.e)(this.listQuery).then(function(e){var a=e.status,o=e.data,n=e.total;0===a&&(t.list=o,t.list&&t.list.length&&t.list.map(function(t){t.edit=!1}),t.total=n,t.tableLoading=!1)})},createNewTag:function(){var t=this;this.form.label?Object(l.a)(this.form).then(function(e){0===e.status&&(t.$message({message:"操作成功",type:"success"}),t.getDataList(),t.addTagDialog=!1)}):this.$message({message:"请输入文本内容",type:"error"})},handleSizeChange:function(t){this.listQuery.pageSize=t,this.getDataList()},handleCurrentChange:function(t){this.listQuery.pageNum=t,this.getDataList()}},created:function(){this.getDataList()}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],key:t.tableKey,staticStyle:{width:"100%"},attrs:{data:t.list,"element-loading-text":"loading",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"内容"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:e.row.label,callback:function(a){t.$set(e.row,"label",a)},expression:"scope.row.label"}})]:a("span",[t._v(t._s(e.row.label))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"背景"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[a("el-color-picker",{model:{value:e.row.background,callback:function(a){t.$set(e.row,"background",a)},expression:"scope.row.background"}})]:a("div",[a("span",[t._v(t._s(e.row.background))]),t._v(" "),a("span",{staticStyle:{display:"inline-block",width:"20px",height:"20px","vertical-align":"middle"},style:{background:e.row.background}})])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"文字"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[a("el-color-picker",{model:{value:e.row.color,callback:function(a){t.$set(e.row,"color",a)},expression:"scope.row.color"}})]:a("div",[a("span",[t._v(t._s(e.row.color))]),t._v(" "),a("span",{staticStyle:{display:"inline-block",width:"20px",height:"20px","vertical-align":"middle"},style:{background:e.row.color}})])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",width:"200",label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.changTime(e.row.create)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",width:"200",label:"更新时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.changTime(e.row.update)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"270","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){t.handleUpdate(e.row)}}},[t._v("修改")]):a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(t){e.row.edit=!0}}},[t._v("编辑")]),t._v(" "),e.row.hot?a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){t.hotTagUpdate(e.row)}}},[t._v("取消热门")]):a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){t.hotTagUpdate(e.row)}}},[t._v("添加热门")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticClass:"pagination-container",staticStyle:{"text-align":"center","margin-top":"20px",position:"relative"}},[a("el-pagination",{attrs:{background:"","current-page":t.listQuery.pageNum,"page-sizes":[10,20,30,50],"page-size":t.listQuery.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),a("el-button",{staticStyle:{position:"absolute",right:"40px",top:"0"},attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v("添加")])],1),t._v(" "),a("el-dialog",{attrs:{title:"新增标签",visible:t.addTagDialog},on:{"update:visible":function(e){t.addTagDialog=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"名称",prop:"label"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入标签内容"},model:{value:t.form.label,callback:function(e){t.$set(t.form,"label",e)},expression:"form.label"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"背景颜色",prop:"background"}},[a("el-color-picker",{model:{value:t.form.background,callback:function(e){t.$set(t.form,"background",e)},expression:"form.background"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"文字颜色",prop:"color"}},[a("el-color-picker",{model:{value:t.form.color,callback:function(e){t.$set(t.form,"color",e)},expression:"form.color"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"预览",prop:"review"}},[t.form.label?a("span",{staticClass:"tag-box",style:{background:t.form.background,color:t.form.color,borderColor:t.changeColorToRgb(t.form.color)}},[t._v(t._s(t.form.label))]):t._e()])],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addTagDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.createNewTag}},[t._v("添 加")])],1)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(i,r,!1,function(t){a("tHSp")},"data-v-f09cde92",null);e.default=s.exports},tHSp:function(t,e){}});
//# sourceMappingURL=8.514b2ce7b157c8237e78.js.map