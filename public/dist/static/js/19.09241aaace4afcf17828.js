webpackJsonp([19],{FfM1:function(e,t){},PWPN:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("woOf"),i=o.n(a),s=(o("9TmC"),o("+I6K"),o("D/cR")),n=o("pOoK");var l={name:"message-manager",data:function(){return{form:{todoTitle:"",todoType:"",finishDate:"",content:""},todoDialogTitle:"新增待办事项",todoDialog:!1,list:[],tableLoading:!1,tableKey:0,listQuery:{pageNum:1,pageSize:10,isFinish:!1},total:0,messageDetailDialogVisible:!1,messageInfo:{},rules:{todoTitle:[{required:!0,message:"请输入标题",trigger:"blur"}],todoType:[{required:!0,message:"请输入待办事项的类型",trigger:"blur"}],finishDate:[{required:!0,message:"请选择计划完成的日期",trigger:"blur"}],content:[{required:!0,message:"请输入待办的具体内容",trigger:"blur"}]}}},methods:{finishTodo:function(e){var t,o=this;this.tableLoading=!0,(t={_id:e._id},Object(s.a)({url:n.a+"/todos/finishTodo",method:"POST",data:t})).then(function(e){0===e.status&&o.$message({message:"操作成功",type:"success"}),o.getList()})},updateTodo:function(e){var t=this;this.todoDialogTitle="修改待办事项",this.form=i()(this.form,e),this.todoDialog=!0,this.$nextTick(function(){t.$refs.form.clearValidate()})},showDialog:function(){var e=this;this.todoDialogTitle="新增待办事项",this.todoDialog=!0,this.$nextTick(function(){e.$refs.form.resetFields()})},handleAdd:function(){var e=this;this.$refs.form.validate(function(t){var o;t&&(o=e.form,Object(s.a)({url:n.a+"/todos/addTodo",method:"POST",data:o})).then(function(t){0===t.status&&(e.$message({message:"添加成功",type:"success"}),e.getList(),e.todoDialog=!1)})})},handleEditSubmit:function(){var e=this;this.$refs.form.validate(function(t){var o;t&&(e.tableLoading=!0,(o=e.form,Object(s.a)({url:n.a+"/todos/updateTodo",method:"POST",data:o})).then(function(t){0===t.status&&(e.$message({message:"更新成功",type:"success"}),e.getList(),e.todoDialog=!1)}))})},isFinishClassName:function(e){return e.row.isFinish?"":"no-finish"},handleSizeChange:function(e){this.listQuery.pageSize=e,this.getList()},handleCurrentChange:function(e){this.listQuery.pageNum=e,this.getList()},getList:function(){var e,t=this;this.tableLoading=!0,(e=this.listQuery,Object(s.a)({url:n.a+"/todos/getTodosPage",method:"POST",data:e})).then(function(e){var o=e.status,a=e.data,i=e.total;0===o&&(t.list=a,t.total=i,t.tableLoading=!1)}).catch(function(e){return console.log(e)})},handleDelete:function(e){var t=this;this.$confirm("确定要删除吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var o;(o={_id:e._id},Object(s.a)({url:n.a+"/todos/deleteTodo",method:"POST",data:o})).then(function(e){0===e.status&&(t.$message({message:"操作成功",type:"success"}),t.getList())})}).catch(function(){})},changTime:function(e,t){if(!e)return"暂无数据";var o=new Date(e),a=o.getFullYear(),i=o.getMonth()+1,s=o.getDate(),n=o.getHours(),l=o.getMinutes(),r=o.getSeconds();return t?a+"年"+i+"月"+s+"日":a+"年"+i+"月"+s+"日-"+(n<10?"0"+n:n)+":"+(l<10?"0"+l:l)+":"+(r<10?"0"+r:r)}},created:function(){this.getList()}},r={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.list,"element-loading-text":"loading","row-class-name":e.isFinishClassName,border:"",fit:"","highlight-current-row":""}},[o("el-table-column",{attrs:{type:"index"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",label:"事项标题"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.todoTitle))])]}}])}),e._v(" "),o("el-table-column",{attrs:{align:"center",label:"当前状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isFinish?o("el-tag",{attrs:{type:"success"}},[e._v("已完成")]):o("el-tag",{attrs:{type:"warning"}},[e._v("未完成")])]}}])}),e._v(" "),o("el-table-column",{attrs:{align:"center",label:"计划完成时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(e.changTime(t.row.finishDate,!0)))])]}}])}),e._v(" "),o("el-table-column",{attrs:{align:"center",width:"350",label:"待办内容"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",{staticClass:"message-content"},[e._v(e._s(t.row.content))])]}}])}),e._v(" "),o("el-table-column",{attrs:{align:"center",label:"操作",width:"280","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isFinish?e._e():o("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(o){e.finishTodo(t.row)}}},[e._v("完成")]),e._v(" "),t.row.isFinish?e._e():o("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(o){e.updateTodo(t.row)}}},[e._v("编辑")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),o("div",{staticClass:"pagination-container",staticStyle:{"text-align":"center","margin-top":"20px",position:"relative"}},[o("el-pagination",{attrs:{background:"","current-page":e.listQuery.pageNum,"page-sizes":[10,20,30,50],"page-size":e.listQuery.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),o("el-button",{staticStyle:{position:"absolute",right:"40px",top:"0"},attrs:{type:"primary"},on:{click:e.showDialog}},[e._v("添加")])],1),e._v(" "),o("el-dialog",{attrs:{title:"提示","append-to-body":"",visible:e.messageDetailDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.messageDetailDialogVisible=t}}},[o("el-form",{attrs:{"label-position":"left","label-width":"80px",model:e.messageInfo}},[o("el-form-item",{attrs:{label:"发送人"}},[o("el-input",{attrs:{disabled:""},model:{value:e.messageInfo.username,callback:function(t){e.$set(e.messageInfo,"username",t)},expression:"messageInfo.username"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"邮箱地址"}},[o("el-input",{attrs:{disabled:""},model:{value:e.messageInfo.email,callback:function(t){e.$set(e.messageInfo,"email",t)},expression:"messageInfo.email"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"发送时间"}},[o("el-input",{attrs:{disabled:""},model:{value:e.messageInfo.sendTime,callback:function(t){e.$set(e.messageInfo,"sendTime",t)},expression:"messageInfo.sendTime"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"发送内容"}},[o("el-input",{attrs:{disabled:"",type:"textarea",resize:"vertical",rows:"5"},model:{value:e.messageInfo.content,callback:function(t){e.$set(e.messageInfo,"content",t)},expression:"messageInfo.content"}})],1)],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.messageDetailDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.messageDetailDialogVisible=!1}}},[e._v("确 定")])],1)],1),e._v(" "),o("el-dialog",{attrs:{title:e.todoDialogTitle,"custom-class":"todo-dialog","append-to-body":"",center:"",width:"30%",visible:e.todoDialog},on:{"update:visible":function(t){e.todoDialog=t}}},[o("el-form",{ref:"form",staticStyle:{width:"100%","padding-bottom":"0"},attrs:{rules:e.rules,model:e.form,"label-position":"left","label-width":"25%"}},[o("el-form-item",{attrs:{label:"待办类型",prop:"todoType"}},[o("el-input",{model:{value:e.form.todoType,callback:function(t){e.$set(e.form,"todoType",t)},expression:"form.todoType"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"事项标题",prop:"todoTitle"}},[o("el-input",{model:{value:e.form.todoTitle,callback:function(t){e.$set(e.form,"todoTitle",t)},expression:"form.todoTitle"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"计划日期",prop:"finishDate"}},[o("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.form.finishDate,callback:function(t){e.$set(e.form,"finishDate",t)},expression:"form.finishDate"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"待办内容",prop:"content"}},[o("el-input",{attrs:{rows:4,type:"textarea"},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.todoDialog=!1}}},[e._v("取 消")]),e._v(" "),"新增待办事项"===e.todoDialogTitle?o("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("确 定")]):o("el-button",{attrs:{type:"primary"},on:{click:e.handleEditSubmit}},[e._v("修 改")])],1)],1)],1)},staticRenderFns:[]};var c=o("VU/8")(l,r,!1,function(e){o("FfM1")},null,null);t.default=c.exports}});
//# sourceMappingURL=19.09241aaace4afcf17828.js.map