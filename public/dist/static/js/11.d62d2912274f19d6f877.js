webpackJsonp([11],{"0A6V":function(t,e){},PWPN:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o("woOf"),a=o.n(i),s=(o("9TmC"),o("+I6K"),o("D/cR")),n=o("pOoK");var l={name:"message-manager",data:function(){return{form:{todoTitle:"",todoType:"",finishDate:"",content:"",completeDate:""},formDisabled:!1,todoDialogTitle:"新增待办事项",todoDialog:!1,list:[],tableLoading:!1,tableKey:0,listQuery:{pageNum:1,pageSize:10,isFinish:!1},total:0,rules:{todoTitle:[{required:!0,message:"请输入标题",trigger:"blur"}],todoType:[{required:!0,message:"请输入待办事项的类型",trigger:"blur"}],finishDate:[{required:!0,message:"请选择计划完成的日期",trigger:"blur"}],content:[{required:!0,message:"请输入待办的具体内容",trigger:"blur"}],completeDate:[{required:!1,message:"",trigger:"blur"}]}}},methods:{lookDetailTodo:function(t){this.todoDialogTitle="查看事项详情",this.formDisabled=!0,this.form=a()(this.form,t),this.rules.completeDate[0].required=!0,this.todoDialog=!0},finishTodo:function(t){var e,o=this;this.tableLoading=!0,(e={_id:t._id},Object(s.a)({url:n.a+"/todos/finishTodo",method:"POST",data:e})).then(function(t){0===t.status&&o.$message({message:"操作成功",type:"success"}),o.getList()})},updateTodo:function(t){var e=this;this.todoDialogTitle="修改待办事项",this.rules.completeDate[0].required=!1,this.formDisabled=!1,this.form=a()(this.form,t),this.todoDialog=!0,this.$nextTick(function(){e.$refs.form.clearValidate()})},showDialog:function(){var t=this;this.todoDialogTitle="新增待办事项",this.formDisabled=!1,this.$set(this,"form",a()(this.form,{todoTitle:"",todoType:"",finishDate:"",content:"",completeDate:""})),this.rules.completeDate[0].required=!1,this.todoDialog=!0,this.$nextTick(function(){t.$refs.form.resetFields()})},handleAdd:function(){var t=this;this.$refs.form.validate(function(e){var o;e&&(o=t.form,Object(s.a)({url:n.a+"/todos/addTodo",method:"POST",data:o})).then(function(e){0===e.status&&(t.$message({message:"添加成功",type:"success"}),t.getList(),t.todoDialog=!1)})})},handleEditSubmit:function(){var t=this;this.$refs.form.validate(function(e){var o;e&&(t.tableLoading=!0,(o=t.form,Object(s.a)({url:n.a+"/todos/updateTodo",method:"POST",data:o})).then(function(e){0===e.status&&(t.$message({message:"更新成功",type:"success"}),t.getList(),t.todoDialog=!1)}))})},isFinishClassName:function(t){return t.row.isFinish?"":"no-finish"},handleSizeChange:function(t){this.listQuery.pageSize=t,this.getList()},handleCurrentChange:function(t){this.listQuery.pageNum=t,this.getList()},getList:function(){var t,e=this;this.tableLoading=!0,(t=this.listQuery,Object(s.a)({url:n.a+"/todos/getTodosPage",method:"POST",data:t})).then(function(t){var o=t.status,i=t.data,a=t.total;0===o&&(e.list=i,e.total=a,e.tableLoading=!1)}).catch(function(t){return console.log(t)})},handleDelete:function(t){var e=this;this.$confirm("确定要删除吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var o;(o={_id:t._id},Object(s.a)({url:n.a+"/todos/deleteTodo",method:"POST",data:o})).then(function(t){0===t.status&&(e.$message({message:"操作成功",type:"success"}),e.getList())})}).catch(function(){})},changTime:function(t,e){if(!t)return"暂无数据";var o=new Date(t),i=o.getFullYear(),a=o.getMonth()+1,s=o.getDate(),n=o.getHours(),l=o.getMinutes(),r=o.getSeconds();return e?i+"年"+a+"月"+s+"日":i+"年"+a+"月"+s+"日-"+(n<10?"0"+n:n)+":"+(l<10?"0"+l:l)+":"+(r<10?"0"+r:r)}},created:function(){this.getList()}},r={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],key:t.tableKey,staticStyle:{width:"100%"},attrs:{data:t.list,"element-loading-text":"loading","row-class-name":t.isFinishClassName,border:"",fit:"","highlight-current-row":""}},[o("el-table-column",{attrs:{type:"index"}}),t._v(" "),o("el-table-column",{attrs:{align:"center",label:"事项标题"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(e.row.todoTitle))])]}}])}),t._v(" "),o("el-table-column",{attrs:{align:"center",label:"当前状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isFinish?o("el-tag",{attrs:{type:"success"}},[t._v("已完成")]):o("el-tag",{attrs:{type:"warning"}},[t._v("未完成")])]}}])}),t._v(" "),o("el-table-column",{attrs:{align:"center",label:"计划完成时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(t.changTime(e.row.finishDate,!0)))])]}}])}),t._v(" "),o("el-table-column",{attrs:{align:"center",width:"350",label:"待办内容"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",{staticClass:"message-content"},[t._v(t._s(e.row.content))])]}}])}),t._v(" "),o("el-table-column",{attrs:{align:"center",label:"操作",width:"280","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isFinish?t._e():o("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(o){t.finishTodo(e.row)}}},[t._v("完成")]),t._v(" "),e.row.isFinish?t._e():o("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(o){t.updateTodo(e.row)}}},[t._v("编辑")]),t._v(" "),e.row.isFinish?o("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(o){t.lookDetailTodo(e.row)}}},[t._v("详情")]):t._e(),t._v(" "),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),o("div",{staticClass:"pagination-container",staticStyle:{"text-align":"center","margin-top":"20px",position:"relative"}},[o("el-pagination",{attrs:{background:"","current-page":t.listQuery.pageNum,"page-sizes":[10,20,30,50],"page-size":t.listQuery.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),o("el-button",{staticStyle:{position:"absolute",right:"40px",top:"0"},attrs:{type:"primary"},on:{click:t.showDialog}},[t._v("添加")])],1),t._v(" "),o("el-dialog",{attrs:{title:t.todoDialogTitle,"custom-class":"todo-dialog","append-to-body":"",center:"",width:"30%",visible:t.todoDialog},on:{"update:visible":function(e){t.todoDialog=e}}},[o("el-form",{ref:"form",staticStyle:{width:"100%","padding-bottom":"0"},attrs:{rules:t.rules,model:t.form,"label-position":"left","label-width":"25%"}},[o("el-form-item",{attrs:{label:"待办类型",prop:"todoType"}},[o("el-input",{attrs:{disabled:t.formDisabled},model:{value:t.form.todoType,callback:function(e){t.$set(t.form,"todoType",e)},expression:"form.todoType"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"事项标题",prop:"todoTitle"}},[o("el-input",{attrs:{disabled:t.formDisabled},model:{value:t.form.todoTitle,callback:function(e){t.$set(t.form,"todoTitle",e)},expression:"form.todoTitle"}})],1),t._v(" "),t.formDisabled?o("el-form-item",{attrs:{label:"完成时间",prop:"completeDate"}},[o("el-date-picker",{attrs:{disabled:"",type:"date",placeholder:"选择日期"},model:{value:t.form.completeDate,callback:function(e){t.$set(t.form,"completeDate",e)},expression:"form.completeDate"}})],1):o("el-form-item",{attrs:{label:"计划日期",prop:"finishDate"}},[o("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.form.finishDate,callback:function(e){t.$set(t.form,"finishDate",e)},expression:"form.finishDate"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"待办内容",prop:"content"}},[o("el-input",{attrs:{disabled:t.formDisabled,rows:4,type:"textarea"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.todoDialog=!1}}},[t._v("取 消")]),t._v(" "),"新增待办事项"===t.todoDialogTitle?o("el-button",{attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v("确 定")]):t._e(),t._v(" "),"查看事项详情"===t.todoDialogTitle?o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.todoDialog=!1}}},[t._v("确 定")]):"修改待办事项"===t.todoDialogTitle?o("el-button",{attrs:{type:"primary"},on:{click:t.handleEditSubmit}},[t._v("修 改")]):t._e()],1)],1)],1)},staticRenderFns:[]};var d=o("VU/8")(l,r,!1,function(t){o("0A6V")},null,null);e.default=d.exports}});
//# sourceMappingURL=11.d62d2912274f19d6f877.js.map