webpackJsonp([5,14],{"/mvX":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("woOf"),s=i.n(a),n=i("//Fk"),r=i.n(n),c=i("oopf"),l=i("9TmC"),o=i("RY13"),h=i("wQuk"),d=i("1AY1"),u={components:{rightShow:c.default,goToTop:d.default},name:"article-detail",data:function(){return{isLike:!1,isNotLike:!1,isLikedThisArticle:!1,isNotLikedThisArticle:!1,tagsArr:[],articleId:"",addOneIsDisabled:!1,articleData:{comments:[],content:"",create:"",description:"",from:{},good:"",hot:"",noGood:"",original:"",poster:"",tags:[],title:"",update:"",views:"",__v:"",_id:""},preArticle:null,nextArticle:null,likeArticles:[],myBackToTopStyle:{right:"50px",bottom:"50px",width:"40px",height:"40px","border-radius":"4px","line-height":"45px",background:"#e7eaf1"},loading:null,typeList:[],breadcrumbData:[]}},methods:{notLikeThisArticle:function(){var t=this;this.isNotLikedThisArticle?this.$message({message:"已经踩过了哟",type:"error"}):Object(l.j)({_id:this.articleId}).then(function(e){var i=e.status,a=e.message;0===i?(t.$message({message:"操作成功",type:"success"}),t.isNotLikedThisArticle=!0,t.articleData.noGood.push(""),t.showActiveAddOneNoLike()):t.$message({message:a,type:"error"})})},likeThisArticle:function(){var t=this;this.isLikedThisArticle?this.$message({message:"已经赞过了哟",type:"error"}):Object(l.i)({_id:this.articleId}).then(function(e){var i=e.status,a=e.message;0===i?(t.$message({message:"操作成功",type:"success"}),t.isLikedThisArticle=!0,t.articleData.good.push(""),t.showActiveAddOne()):t.$message({message:a,type:"error"})})},showActiveAddOne:function(){var t=this;this.addOneIsDisabled||(this.addOneIsDisabled=!0,this.isLike=!0,setTimeout(function(){t.isLike=!1},1e3))},showActiveAddOneNoLike:function(){var t=this;this.addOneIsDisabledNotLike||(this.addOneIsDisabledNotLike=!0,this.isNotLike=!0,setTimeout(function(){t.isNotLike=!1},1e3))},articleChange:function(t){this.$router.push("/home/article-detail?id="+t),this.$refs.goTop.backToTop(),this.getData()},changeColorToRgb:function(t,e){var i=[],a=[];if(3===(t=t.replace(/#/,"")).length){for(var s=[],n=0;n<3;n++)s.push(t.charAt(n)+t.charAt(n));t=s.join("")}for(var r=0;r<3;r++)i[r]="0x"+t.substr(2*r,2),a.push(parseInt(Number(i[r])));return"rgba("+a.join(",")+", "+(e||1)+")"},changTime:function(t,e){if(!t)return"暂无数据";var i=new Date(t),a=i.getFullYear(),s=i.getMonth()+1,n=i.getDate(),r=i.getHours(),c=i.getMinutes(),l=i.getSeconds();return e?a+"年"+s+"月"+n+"日":a+"年"+s+"月"+n+"日-"+(r<10?"0"+r:r)+":"+(c<10?"0"+c:c)+":"+(l<10?"0"+l:l)},handleSelect:function(t){this.$router.push("/home/article-list?path="+t)},getArticleDetail:function(){var t=this;return new r.a(function(e,i){Object(l.d)({id:t.articleId}).then(function(i){var a=i.status,s=i.data,n=i.pre,r=i.next,c=i.isLike,l=i.isNotLike;0===a?(t.preArticle=n,t.nextArticle=r,t.isLikedThisArticle=c,t.addOneIsDisabled=c,t.isNotLikedThisArticle=l,t.addOneIsDisabledNotLike=l,e(s)):e([])}).catch(function(t){return i(t)})})},getTagList:function(){return new r.a(function(t,e){Object(o.c)({}).then(function(e){var i=e.status,a=e.data;t(0===i?a:[])}).catch(function(t){return e(t)})})},getAllTypeList:function(){var t=this;return new r.a(function(e,i){Object(h.c)({}).then(function(i){var a=i.status,n=i.data;t.$set(t,"typeList",[]),0===a&&n&&n.length&&(n.map(function(e){1===e.upperType&&t.typeList.push(s()(e,{children:[]}))}),t.typeList.length&&(n.map(function(e){t.typeList.find(function(t){t.value===e.upperType&&t.children.push(e)})}),t.typeList.sort(function(t,e){return t.typeSort-e.typeSort})),e())}).catch(function(t){return i(t)})})},getLikeArticles:function(){var t=this,e=[];return this.articleData.tags&&this.articleData.tags.length&&this.articleData.tags.map(function(t){e.push(t.value)}),Object(l.h)({tags:e,id:this.articleData._id}).then(function(e){var i=e.status,a=e.data;0===i&&(t.likeArticles=a)})},getData:function(){var t=this;this.loading=this.$loading({lock:!0,text:"加载中...",background:"rgba(0, 0, 0, .9)"}),this.articleId=this.$route.query.id,this.articleId||(this.$message({message:"获取文章信息失败",type:"error"}),this.$router.push("/home/article")),r.a.all([this.getArticleDetail(),this.getTagList(),this.getAllTypeList()]).then(function(e){var i=e[0],a=e[1],s=[];i.tags.length&&a.length&&i.tags.map(function(t){a.find(function(e){if(t===e.value)return s.push(e),!0})}),t.typeList&&t.typeList.length&&(t.$set(t,"breadcrumbData",[]),t.typeList.find(function(e){return e.children&&e.children.length?e.children.find(function(a){if(a.typePath===i.type)return t.breadcrumbData.push(e),t.breadcrumbData.push(a),!0}):e.typePath===i.type?(t.breadcrumbData.push(e),!0):void 0})),i.tags=s,t.articleData=i}).catch(function(t){return console.log(t)}).then(function(){return t.getLikeArticles()}).then(function(){return t.loading.close()})},getHotArticle:function(t){this.$router.push("/home/article-detail?id="+t),this.getData()}},created:function(){this.getData()}},p={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"width"},[i("go-to-top",{ref:"goTop",attrs:{transitionName:"fade",customStyle:t.myBackToTopStyle,visibilityHeight:300,backPosition:0}}),t._v(" "),i("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.articleData.type,mode:"horizontal"},on:{select:t.handleSelect}},[t._l(t.typeList,function(e){return[e.children.length?i("el-submenu",{key:e.value,attrs:{index:e.typePath}},[i("template",{slot:"title"},[t._v(t._s(e.typeName))]),t._v(" "),t._l(e.children,function(e){return i("el-menu-item",{key:e.value,attrs:{index:e.typePath}},[t._v(t._s(e.typeName))])})],2):i("el-menu-item",{key:e.value,attrs:{index:e.typePath}},[t._v(t._s(e.typeName))])]})],2),t._v(" "),i("el-breadcrumb",{staticStyle:{height:"50px","line-height":"50px","padding-left":"20px","margin-top":"20px","background-color":"rgb(240, 240, 240)"},attrs:{separator:">"}},[t._l(t.breadcrumbData,function(e){return i("el-breadcrumb-item",{key:e._id},[i("router-link",{attrs:{to:1===e.upperType?"/home/article-detail?id="+t.articleData._id:"/home/article-list?path="+e.typePath}},[t._v("\n                "+t._s(e.typeName)+"\n            ")])],1)}),t._v(" "),i("el-breadcrumb-item",[t._v(t._s(t.articleData.title))])],2),t._v(" "),i("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[i("el-col",{attrs:{span:18}},[i("div",{staticClass:"article-title"},[t._v("\n                "+t._s(t.articleData?t.articleData.title:"数据获取失败")+"\n            ")]),t._v(" "),i("div",{staticClass:"article-from"},[t.articleData.original?i("div",{staticClass:"copyright-area"},[t._v("文章为博主原创内容 如有转载请注明出处")]):i("div",{staticClass:"copyright-area"},[t._v("\n                    原文出处："),i("a",{attrs:{target:"_blank",href:t.articleData?t.articleData.from.fromUrl:"javascript:;"}},[t._v(t._s(t.articleData?t.articleData.from.author:"数据获取失败"))])])]),t._v(" "),i("div",{staticClass:"editor-content content",domProps:{innerHTML:t._s(t.articleData?t.articleData.content:"数据获取失败")}}),t._v(" "),i("div",{staticClass:"bottom",staticStyle:{"margin-top":"30px"}},[i("div",{staticClass:"tips"},[i("span",{staticStyle:{"margin-right":"10px"}},[t._v("标签:")]),t._v(" "),t._l(t.articleData.tags,function(e){return i("a",{key:e.value,staticStyle:{display:"inline-block","margin-right":"10px"},attrs:{href:"javascript:;"}},[i("span",{staticClass:"tag",style:{background:t.changeColorToRgb(e.background,.2),color:e.color,borderColor:t.changeColorToRgb(e.color,.1)}},[t._v(t._s(e.label))])])})],2),t._v(" "),i("div",{staticClass:"actions"},[i("a",{staticClass:"like-this-article",style:{color:t.isLikedThisArticle?"rgb(118, 228, 231)":""},attrs:{href:"javascript:;"},on:{click:t.likeThisArticle}},[i("i",{staticClass:"icon-good"}),t._v(t._s(t.articleData.good.length)+"\n                        "),i("span",{staticClass:"add-one",class:{"add-one-active":t.isLike}},[t._v("+1")])]),t._v(" "),i("a",{staticClass:"not-like-this-article",style:{color:t.isNotLikedThisArticle?"rgb(241, 90, 36)":""},attrs:{href:"javascript:;"},on:{click:t.notLikeThisArticle}},[i("i",{staticClass:"icon-not-good"}),t._v(t._s(t.articleData.noGood.length)+"\n                        "),i("span",{staticClass:"add-one",class:{"add-one-active":t.isNotLike}},[t._v("+1")])]),t._v(" "),i("a",{attrs:{href:"javascript:;"}},[i("i",{staticClass:"icon-coments"}),t._v(t._s(t.articleData?t.articleData.comments.length:0))])]),t._v(" "),i("div",{staticClass:"pre-or-next"},[i("div",{staticClass:"pre"},[i("i",{staticClass:"icon-pre"}),t._v("上一篇:\n                        "),t.preArticle?i("a",{attrs:{href:"javascript:;"},on:{click:function(e){t.articleChange(t.preArticle._id)}}},[t._v(t._s(t.preArticle.title))]):i("span",{staticStyle:{"margin-left":"10px"}},[t._v("已经是第一篇啦")])]),t._v(" "),i("div",{staticClass:"next"},[i("i",{staticClass:"icon-next"}),t._v("下一篇:\n                        "),t.nextArticle?i("a",{attrs:{href:"javascript:;"},on:{click:function(e){t.articleChange(t.nextArticle._id)}}},[t._v(t._s(t.nextArticle.title))]):i("span",{staticStyle:{"margin-left":"10px"}},[t._v("已经是最后一篇啦")])])]),t._v(" "),i("div",{staticClass:"comments"},[i("h4",[t._v("评论列表")]),t._v(" "),t.articleData&&t.articleData.comments.length?i("ul",t._l(t.articleData.comments,function(e,a){return i("li",{key:a},[i("div",{staticClass:"comment-header"},[t._v("\n                                #"),i("span",[t._v(t._s(a+1))]),t._v("楼\n                                "),i("span",{staticClass:"date"},[t._v(t._s(t.changTime(e.date)))]),t._v(" "),i("i",{staticClass:"username"},[t._v(t._s(e.username))])]),t._v(" "),i("p",{staticClass:"comment-content"},[t._v("\n                                "+t._s(e.content)+"\n                            ")])])})):i("div",{staticClass:"no-comments"},[t._v("\n                        暂无评论\n                    ")])]),t._v(" "),i("div",{staticClass:"related-articles"},[i("h4",[t._v("相关文章")]),t._v(" "),t.likeArticles.length?i("ul",t._l(t.likeArticles,function(e){return i("li",{key:e._id},[i("a",{attrs:{href:"javascript:;"},on:{click:function(i){t.$router.push("/home/article-detail?id="+e._id)}}},[t._v(t._s(e.title))])])})):i("div",{staticClass:"no-like-data"},[t._v("\n                        暂无其他相似文章\n                    ")])])])]),t._v(" "),i("right-show",{attrs:{"get-hot-article":t.getHotArticle}})],1)],1)},staticRenderFns:[]};var v=i("VU/8")(u,p,!1,function(t){i("y45H")},"data-v-7c273109",null);e.default=v.exports},"1AY1":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={name:"BackToTop",props:{visibilityHeight:{type:Number,default:400},backPosition:{type:Number,default:0},customStyle:{type:Object,default:function(){return{right:"50px",bottom:"50px",width:"40px",height:"40px","border-radius":"4px","line-height":"45px",background:"#e7eaf1"}}},transitionName:{type:String,default:"fade"}},data:function(){return{visible:!1,interval:null}},mounted:function(){window.addEventListener("scroll",this.handleScroll)},beforeDestroy:function(){window.removeEventListener("scroll",this.handleScroll),this.interval&&clearInterval(this.interval)},methods:{handleScroll:function(){this.visible=window.pageYOffset>this.visibilityHeight},backToTop:function(){var t=this,e=window.pageYOffset,i=0;this.interval=setInterval(function(){var a=Math.floor(t.easeInOutQuad(10*i,e,-e,500));a<=t.backPosition?(window.scrollTo(0,t.backPosition),clearInterval(t.interval)):window.scrollTo(0,a),i++},16.7)},easeInOutQuad:function(t,e,i,a){return(t/=a/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e}}},s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:this.transitionName}},[e("div",{directives:[{name:"show",rawName:"v-show",value:this.visible,expression:"visible"}],staticClass:"back-to-ceiling",style:this.customStyle,on:{click:this.backToTop}},[e("svg",{staticClass:"Icon Icon--backToTopArrow",staticStyle:{height:"16px",width:"16px"},attrs:{width:"16",height:"16",viewBox:"0 0 17 17",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"}},[e("title",[this._v("回到顶部")]),this._v(" "),e("g",[e("path",{attrs:{d:"M12.036 15.59c0 .55-.453.995-.997.995H5.032c-.55 0-.997-.445-.997-.996V8.584H1.03c-1.1 0-1.36-.633-.578-1.416L7.33.29c.39-.39 1.026-.385 1.412 0l6.878 6.88c.782.78.523 1.415-.58 1.415h-3.004v7.004z","fill-rule":"evenodd"}})])])])])},staticRenderFns:[]};var n=i("VU/8")(a,s,!1,function(t){i("BR3E")},"data-v-627dbd20",null);e.default=n.exports},BR3E:function(t,e){},y45H:function(t,e){}});
//# sourceMappingURL=5.734a297d8ab6ab930212.js.map